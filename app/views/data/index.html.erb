<div class="container my-5">
  <h4>カロリーデータ</h4>
   <div class="row text-center d-flex align-items-center my-5">
    <div class="col-12 ml-5">
      <table class="able table-bordered">
      <h5 class ="mb-3 text-left">今週のカロリーバランス(Kcal)</h5>
        <tr>
          <th>日曜日</th>
          <th>月曜日</th>
          <th>火曜日</th>
          <th>水曜日</th>
          <th>木曜日</th>
          <th>金曜日</th>
          <th>土曜日</th>
          <th width="150">今週の合計</th>
          <th width="150">今月の合計</th>
        </tr>
        <tr>
          <!--=====週間のカロリーバランスを計算する=====-->
        <% sum = 0 %>
        <% 7.times do |i| %>
         <td><%= @cal_balances_week[i] %></td>
         <% sum += @cal_balances_week[i].eql?("") ? 0 : @cal_balances_week[i].to_i %>

        <% end %>

          <!--=====月間のカロリーバランスを計算する=====-->
        <% month_sum = 0 %>
        <% @cal_ingestions_month.each do |cal_ingestions|%>
          <% month_sum += cal_ingestions.total_cal_ingestions.to_i - CalConsumption.find_by(created_at: cal_ingestions.created_at..cal_ingestions.created_at.end_of_day ).total_cal_consumptions.to_i %>
          <% end %>

          <td><%= sum %></td>
          <td><%= month_sum %></td>
        </tr>
      </table>
     </div>
   </div>
   <!--=====グラフの部分テンプレート=====-->
  <div class="row text-center d-flex align-items-center my-5">
    <div class="col-12 ml-5">
      <%= render "data/chart", cal_consumption: @cal_consumption, cal_ingestion: @cal_ingestion %>
    </div>
  </div>
</div>
